{{ form_start(form, {'attr': {'class': 'space-y-4'}}) }}

{# Nom du lieu #}
<div class="form-control">
    {{ form_label(form.nom, 'Nom du lieu :', {'label_attr': {'class': 'label'}}) }}
    {{ form_widget(form.nom, {'attr': {'class': 'input input-bordered w-full', 'placeholder': 'Nom du lieu'}}) }}
    {{ form_errors(form.nom) }}
</div>

{# Adresse du lieu #}
<div class="form-control">
    {{ form_label(form.adresse, 'Adresse du lieu :', {'label_attr': {'class': 'label'}}) }}
    {{ form_widget(form.adresse, {'attr': {'class': 'input input-bordered w-full', 'placeholder': 'Adresse du lieu'}}) }}
    {{ form_errors(form.adresse) }}
</div>

{# Section Créneaux #}
<div class="divider">Créneaux</div>
{% set prototypeHtml %}
    <li class="card bg-base-200 shadow-sm p-4 relative">
        <div class="flex justify-end">
            <button type="button" class="btn btn-sm btn-circle btn-error remove-creneau"
                    data-action="click->creneau-collection#remove"
                    title="Supprimer">✕</button>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            {{ form_row(form.creneaux.vars.prototype.jourSemaine, {'attr': {'class': 'select select-bordered w-full'}}) }}
            {{ form_row(form.creneaux.vars.prototype.capacite, {'attr': {'class': 'input input-bordered w-full'}}) }}
            {{ form_row(form.creneaux.vars.prototype.heureDebut, {'attr': {'class': 'input input-bordered w-full'}}) }}
            {{ form_row(form.creneaux.vars.prototype.heureFin, {'attr': {'class': 'input input-bordered w-full'}}) }}
            {{ form_row(form.creneaux.vars.prototype.prioritaire, {'attr': {'class': 'input input-bordered w-full'}}) }}
        </div>
    </li>
{% endset %}
<div data-controller="creneau-collection"
     data-creneau-collection-target="list"
     data-index="{{ form.creneaux|length }}"
     data-prototype="{{ prototypeHtml|e('html_attr') }}">

    <ul class="creneaux-list space-y-4">
        {% for creneau in form.creneaux %}
            <li class="card bg-base-200 shadow-sm p-4 relative">
                <div class="flex justify-end">
                    <button type="button" class="btn btn-sm btn-circle btn-error"
                            data-action="click->creneau-collection#remove" title="Supprimer">✕</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    {{ form_row(creneau.jourSemaine, {'attr': {'class': 'select select-bordered w-full'}}) }}
                    {{ form_row(creneau.capacite, {'attr': {'class': 'input input-bordered w-full'}}) }}
                    {{ form_row(creneau.heureDebut, {'attr': {'class': 'input input-bordered w-full'}}) }}
                    {{ form_row(creneau.heureFin, {'attr': {'class': 'input input-bordered w-full'}}) }}
                    {{ form_row(creneau.prioritaire, {'attr': {'class': 'input input-bordered w-full'}}) }}
                </div>
            </li>
        {% endfor %}
    </ul>

    <button type="button"
            class="btn btn-primary btn-sm mt-4"
            data-action="click->creneau-collection#add">
        Ajouter un créneau
    </button>
</div>
<button class="btn btn-success btn-sm mt-6">{{ button_label|default('Save') }}</button>
{{ form_end(form) }}
