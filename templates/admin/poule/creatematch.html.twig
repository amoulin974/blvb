{% extends 'base.html.twig' %}
{% block title %}Ajouter les parties à la journee {{ journee.numero }} de la poule {{ poule.nom }}{% endblock %}
{% block body %}

    {% if error %}
        <p class="alert alert-error">{{ error }}</p>
    {% else %}
        <h1>Placer les matchs de la journée {{ journee.numero }} de la poule {{ poule.nom }}</h1>
        <div class="mb-4">
            <a class="btn btn-sm btn-primary" href="{{ path('admin_saison_show', {'id': poule.phase.saison.id, "openPoule": poule.id}) }}">Voir la saison</a>
            <a class="btn btn-sm btn-primary" href="{{ path('admin_poule_edit', {'id': poule.id}) }}">Modifier la poule</a>
        </div>

        {#  Sélecteur de journée#}
        <div>

            {% for majournee in poule.journees %}
                <span class="p-2 badge
{% if majournee.id == journee.id %} badge-info  {% else %} badge-outline {% endif %}"><a class="link" href="/admin/partie/{{ poule.id }}/getpartiecalendar/{{ majournee.id }}">Journée {{ majournee.numero }}</a></span>
{#                - {{ journee.dateDebut|format_date('short', locale='fr') }} - {{ journee.dateFin|format_date('short', locale='fr') }}#}
            {% endfor %}

        </div>

        <div
            id="calendar"
            data-controller="calendar"
            data-calendar-datatype-value="partie"
            data-calendar-journeeid-value={{ journee.id }}
            data-calendar-events-url-value={{ path('admin_partie_api', {'id': poule.id, journee:journee.id}) }}
            data-calendar-datedebut-value="{{ journee.datedebut|date('Y-m-d') }}"
            data-calendar-initialview-value="dayGridSixDay"
            data-calendar-buttons-value="multiMonthFourMonth, dayGridFourWeek"
            data-calendar-duration-value="1"
            data-calendar-pouleid-value="{{ poule.id }}"



            data-calendar-datefin-value="{{ journee.poule.phase.datefin|date('Y-m-d') }}"
            data-calendar-csrf-token-value="{{ csrf_token('update_journee') }}">
        </div>


        <!-- Modal DaisyUI -->
        <div id="partieModal" class="modal">
        <div class="modal-box">
            <h2 class="font-bold text-lg mb-4" id="eventTitle">Titre de l'événement</h2>
            <hr>
            <h4>Modifier l'événement</h4>
            <div id="modalBody" class="modal-body">
            </div>
            <hr>
            <h4>Supprimer l'événement</h4>
            <div class="modal-action flex flex-row justify-end mt-2">
                <button class="btn btn-error" id="supprimer" >Supprimer l'événement</button>
            </div>
            <hr>
            <div class="modal-action flex flex-row justify-end">
                <button class="btn btn-info" id="closeModal" onclick="document.querySelector('#partieModal').classList.remove('modal-open')" >Fermer cette fenêtre</button>
            </div>
        </div>
        </div>
{#        <script src="{{ asset('app.js') }}"></script>#}
        <div id="calendar-tooltip"
             class="fixed hidden z-[9999] bg-slate-800 text-white p-3 rounded-lg shadow-xl text-sm pointer-events-none max-w-xs border border-slate-600">
            <div id="tooltip-content"></div>
            {# Petite flèche #}
            <div class="absolute w-2 h-2 bg-slate-800 rotate-45 -bottom-1 left-1/2 -translate-x-1/2"></div>
        </div>
    {% endif %}

{% endblock %}

